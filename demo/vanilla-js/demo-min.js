!function(){"use strict";const t=[{name:"xxl",mq:"(min-width: 1400px)",w:1920,h:1080,dpr2:!1},{name:"xl",mq:"(min-width: 1200px) and (max-width: 1399px)",w:1400,h:788,dpr2:!1},{name:"lg",mq:"(min-width: 992px) and (max-width: 1199px)",w:1200,h:675,dpr2:!1},{name:"md",ar:"16/9",mq:"(min-width: 768px) and (max-width: 991px)",w:992,h:558,dpr2:!0},{name:"sm",ar:"16/9",mq:"(min-width: 576px) and (max-width: 767px)",w:768,h:432,dpr2:!0},{name:"xs-portrait",ar:"16/9",mq:"(orientation: portrait) and (max-width: 575px)",w:324,h:576,dpr2:!0},{name:"xs-landscape",ar:"16/9",mq:"(orientation: landscape) and (max-width: 575px)",w:576,h:324,dpr2:!0}];var e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],c=t=>{let c=0;for(let a=0;a<t.length;a++){let r=t[a];c=83*c+e.indexOf(r)}return c},a=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},r=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(12.92*e*255+.5):Math.trunc(255*(1.055*Math.pow(e,.4166666666666667)-.055)+.5)},s=(t,e)=>(t=>t<0?-1:1)(t)*Math.pow(Math.abs(t),e),n=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},l=t=>{let e=t>>8&255,c=255&t;return[a(t>>16),a(e),a(c)]},o=(t,e)=>{let c=Math.floor(t/361),a=Math.floor(t/19)%19,r=t%19;return[s((c-9)/9,2)*e,s((a-9)/9,2)*e,s((r-9)/9,2)*e]};!function(e){const a=["targetElement","unsplashDataUrl","utmSource","title"];e={targetElement:null,className:null,unsplashDataUrl:null,utmSource:null,title:null,text:null,backLink:null,hidePhotoLink:!0,cssModules:!1,cssModulesObj:null,...e};try{if(a.map((t=>e[t])).filter((t=>null!==t&&""!==t)).length!==a.length)throw new Error(`I parametri ${a.map((t=>`\`${t}\``)).join(",")} sono obbligatori`);if(e.cssModules&&!e.cssModulesObj)throw new Error("Il parametro `cssModulesObj` Ã¨ obbligatorio se `cssModules = true`");const s=t=>e.cssModules?e.cssModulesObj[t]:t;e.targetElement.innerHTML=`<div class="${s("container")+(e.className?` ${e.className}`:"")}"></div>`;const i=e.targetElement.querySelector("."+s("container"));i.innerHTML=`<div class="${s("loaderWrapper")}"><div class="${s("loader")}"></div></div>`,async function(t){t={unsplash_data_url:null,...t};try{if(!t.unsplash_data_url)throw new Error("Unsplash data url must be defined");return await(async()=>{const e=await fetch(t.unsplash_data_url);if(!e.ok)throw console.error("Ajax error on: "+t.unsplash_data_url),console.error(e),new Error(`Loading error: ${e.status}`);return await e.json()})().then((t=>({id:t.id,color:t.color,width:t.width,height:t.height,alt_description:t.alt_description,date:t.created_at,base_url:t.urls.raw,unsplash_url:t.links.html,author:t.user.name??t.user.username,author_profile:t.user.links.html,blur_hash:t.blur_hash,image_description:(()=>{let e=t.location.name,c=t.description??t.alt_description;return t.description&&e&&(e=new RegExp(e,"i").test(c)?null:e),[c,e].filter((t=>null!=t)).join(" / ")})()})))}catch(t){console.error(t)}}({unsplash_data_url:e.unsplashDataUrl}).then((a=>{const h=((t,e,a,s)=>{(t=>{if(!t||t.length<6)throw new n("The blurhash string must be at least 6 characters");let e=c(t[0]),a=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*a)throw new n(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*a}`)})(t),s|=1;let i=c(t[0]),h=Math.floor(i/9)+1,d=i%9+1,u=(c(t[1])+1)/166,p=new Array(d*h);for(let e=0;e<p.length;e++)if(0===e){let a=c(t.substring(2,6));p[e]=l(a)}else{let a=c(t.substring(4+2*e,6+2*e));p[e]=o(a,u*s)}let m=4*e,g=new Uint8ClampedArray(m*a);for(let t=0;t<a;t++)for(let c=0;c<e;c++){let s=0,n=0,l=0;for(let r=0;r<h;r++)for(let o=0;o<d;o++){let i=Math.cos(Math.PI*c*o/e)*Math.cos(Math.PI*t*r/a),h=p[o+r*d];s+=h[0]*i,n+=h[1]*i,l+=h[2]*i}let o=r(s),i=r(n),u=r(l);g[4*c+0+t*m]=o,g[4*c+1+t*m]=i,g[4*c+2+t*m]=u,g[4*c+3+t*m]=255}return g})(a.blur_hash,i.offsetWidth,i.offsetHeight),d=document.createElement("canvas");d.className=s("canvas"),d.width=i.offsetWidth,d.height=i.offsetHeight;const u=d.getContext("2d"),p=u.createImageData(i.offsetWidth,i.offsetHeight);p.data.set(h),u.putImageData(p,0,0),i.insertAdjacentElement("afterbegin",d);const m=["avif","webp","pjpg"];i.insertAdjacentHTML("beforeend","<picture>"+t.map(((e,c)=>{const r=c===t.length-1;return m.map((t=>{const c=t===m.at(-1);let n=a.base_url+(/\?/.test(a.base_url)?"&":"?")+"fit=crop&crop=focalpoint&q=60"+`&w=${e.w}&h=${e.h}`+`&fm=${t}`;return r&&c?`<img class="${s("unsplashPhoto")}" src="${n}" srcset="${n}${e.dpr2?` 1x, ${n}&dpr=2 2x`:""}" alt="${a.alt_description??`${a.author} / Unsplash`}" width="${e.w}" height="${e.h}">`:`<source srcset="${n}${e.dpr2?` 1x, ${n}&dpr=2 2x`:""}" `+(c?"":`type="image/${t}" `)+`media="${e.mq}" `+`width="${e.w}" height="${e.h}">`})).join("")})).join("")+"</picture>"),i.querySelector("."+s("unsplashPhoto")).onload=()=>{i.querySelector("."+s("loaderWrapper")).remove(),i.classList.add(s("show")),i.insertAdjacentHTML("beforeend",`<div class="${s("messageBox")}">\n            <div class="${s("message")}">\n              <h1>${e.title}</h1>\n              ${e.text?`<p>${e.text}</p>`:""}\n              ${e.backLink?`<p class="${s("backLink")}">${e.backLink}</p>`:""}\n\n              <div class="${s("arrowWrapper")}" role="button">\n                <img src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='black' viewBox='0 0 256 256'%3e%3cpath d='M152%2c80v96H120v48L24%2c128l96-96V80Z' opacity='0.2'%3e%3c/path%3e%3cpath d='M152%2c72H128V32a8%2c8%2c0%2c0%2c0-13.66-5.66l-96%2c96a8%2c8%2c0%2c0%2c0%2c0%2c11.32l96%2c96A8%2c8%2c0%2c0%2c0%2c128%2c224V184h24a8%2c8%2c0%2c0%2c0%2c8-8V80A8%2c8%2c0%2c0%2c0%2c152%2c72Zm-8%2c96H120a8%2c8%2c0%2c0%2c0-8%2c8v28.69L35.31%2c128%2c112%2c51.31V80a8%2c8%2c0%2c0%2c0%2c8%2c8h24Zm80-88v96a8%2c8%2c0%2c0%2c1-16%2c0V80a8%2c8%2c0%2c0%2c1%2c16%2c0Zm-32%2c0v96a8%2c8%2c0%2c0%2c1-16%2c0V80a8%2c8%2c0%2c0%2c1%2c16%2c0Z'%3e%3c/path%3e%3c/svg%3e" alt="Icona freccia">\n              </div>\n            </div>\n\n            <div class="${s("credits")}">\n              <em>${a.image_description}</em>\n              <span>Photo\n                <a href="${a.author_profile}?utmSource=${e.utmSource}&utm_medium=referral">\n                  ${a.author} / Unsplash\n                </a>\n              </span>\n            </div>\n          </div>\n          <div class="${s("unsplashPhotoLink")}${e.hidePhotoLink?` ${s("showOnHover")}`:""}">\n            <a href="${a.unsplash_url}?utm_source=${e.utmSource}&utm_medium=referral" target="_blank" rel="noopener noreferrer">\n              <img src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='black' viewBox='0 0 256 256'%3e%3cpath d='M224%2c56V178.06l-39.72-39.72a8%2c8%2c0%2c0%2c0-11.31%2c0L147.31%2c164%2c97.66%2c114.34a8%2c8%2c0%2c0%2c0-11.32%2c0L32%2c168.69V56a8%2c8%2c0%2c0%2c1%2c8-8H216A8%2c8%2c0%2c0%2c1%2c224%2c56Z' opacity='0.2'%3e%3c/path%3e%3cpath d='M216%2c40H40A16%2c16%2c0%2c0%2c0%2c24%2c56V200a16%2c16%2c0%2c0%2c0%2c16%2c16H216a16%2c16%2c0%2c0%2c0%2c16-16V56A16%2c16%2c0%2c0%2c0%2c216%2c40Zm0%2c16V158.75l-26.07-26.06a16%2c16%2c0%2c0%2c0-22.63%2c0l-20%2c20-44-44a16%2c16%2c0%2c0%2c0-22.62%2c0L40%2c149.37V56ZM40%2c172l52-52%2c80%2c80H40Zm176%2c28H194.63l-36-36%2c20-20L216%2c181.38V200ZM144%2c100a12%2c12%2c0%2c1%2c1%2c12%2c12A12%2c12%2c0%2c0%2c1%2c144%2c100Z'%3e%3c/path%3e%3c/svg%3e" alt="Icona immagine" />\n            </a>\n          </div>`),i.querySelector("."+s("arrowWrapper")).addEventListener("click",(t=>{t.target.closest(`.${s("message")}`).classList.toggle(s("hidden"))}),!1)}}))}catch(t){console.error(t)}}({targetElement:document.getElementById("root"),unsplashDataUrl:"https://primominuto.altervista.org/proxy/getUnsplashPhotos.php",utmSource:"vanilla-js-test",title:"Message title",text:"This is the message <strong>text</strong>",backLink:'<a href="https://github.com/massimo-cassandro/unsplash-page">Back to repository home</a>',hidePhotoLink:!0,cssModules:!1,cssModulesObj:null})}();
//# sourceMappingURL=demo-min.js.map
